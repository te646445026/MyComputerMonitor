<Window x:Class="MyComputerMonitor.WPF.Views.NetworkMonitorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.modernwpf.com/2019"
        xmlns:oxy="http://oxyplot.org/wpf"
        ui:WindowHelper.UseModernWindowStyle="True"
        Title="网络监控"
        Width="1200"
        Height="800"
        MinWidth="800"
        MinHeight="600"
        WindowStartupLocation="CenterScreen">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- 标题栏 -->
        <Border Grid.Row="0" 
                Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
                BorderBrush="{DynamicResource SystemControlForegroundBaseMediumLowBrush}"
                BorderThickness="0,0,0,1">
            <Grid Height="48">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- 标题 -->
                <StackPanel Grid.Column="0" 
                           Orientation="Horizontal" 
                           VerticalAlignment="Center"
                           Margin="16,0">
                    <TextBlock Text="🌐" 
                              FontSize="20" 
                              VerticalAlignment="Center"
                              Margin="0,0,8,0"/>
                    <TextBlock Text="网络监控" 
                              FontSize="16" 
                              FontWeight="SemiBold"
                              VerticalAlignment="Center"/>
                </StackPanel>
                
                <!-- 控制按钮 -->
                <StackPanel Grid.Column="2" 
                           Orientation="Horizontal"
                           VerticalAlignment="Center"
                           Margin="16,0">
                    <TextBlock Text="网卡选择："
                              VerticalAlignment="Center"
                              Margin="0,0,8,0"/>
                    <ComboBox x:Name="NetworkAdapterComboBox"
                             Width="200"
                             SelectedIndex="0"
                             SelectionChanged="NetworkAdapterComboBox_SelectionChanged"
                             Margin="0,0,16,0">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <Ellipse Width="8" Height="8" 
                                            VerticalAlignment="Center"
                                            Margin="0,0,8,0">
                                        <Ellipse.Style>
                                            <Style TargetType="Ellipse">
                                                <Setter Property="Fill" Value="Red"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding IsConnected}" Value="True">
                                                        <Setter Property="Fill" Value="Green"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Ellipse.Style>
                                    </Ellipse>
                                    <TextBlock Text="{Binding Name}" 
                                              VerticalAlignment="Center"/>
                                </StackPanel>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                    <Button Content="🔄" 
                           Width="32" 
                           Height="32"
                           Margin="0,0,8,0"
                           Click="RefreshButton_Click"
                           ToolTip="刷新数据"/>
                    <ComboBox x:Name="TimeRangeComboBox"
                             Width="120"
                             SelectedIndex="2"
                             SelectionChanged="TimeRangeComboBox_SelectionChanged">
                        <ComboBoxItem Content="最近 5 分钟"/>
                        <ComboBoxItem Content="最近 15 分钟"/>
                        <ComboBoxItem Content="最近 30 分钟"/>
                        <ComboBoxItem Content="最近 1 小时"/>
                        <ComboBoxItem Content="最近 2 小时"/>
                    </ComboBox>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- 主内容 -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <Grid Margin="16">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- 网络适配器基本信息 -->
                <Border Grid.Row="0" 
                       Background="{DynamicResource SystemControlBackgroundAltHighBrush}"
                       BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
                       BorderThickness="1"
                       CornerRadius="8"
                       Margin="0,0,0,16"
                       Padding="16">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <!-- 左侧信息 -->
                        <StackPanel Grid.Column="0">
                            <TextBlock Text="网络适配器信息"
                                      FontSize="16"
                                      FontWeight="SemiBold"
                                      Margin="0,0,0,12"/>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                
                                <TextBlock Grid.Row="0" Grid.Column="0" Text="适配器名称：" Margin="0,0,8,4"/>
                                <TextBlock Grid.Row="0" Grid.Column="1" x:Name="AdapterNameTextBlock" Text="获取中..." Margin="0,0,0,4"/>
                                
                                <TextBlock Grid.Row="1" Grid.Column="0" Text="网络类型：" Margin="0,0,8,4"/>
                                <TextBlock Grid.Row="1" Grid.Column="1" x:Name="NetworkTypeTextBlock" Text="获取中..." Margin="0,0,0,4"/>
                                
                                <TextBlock Grid.Row="2" Grid.Column="0" Text="MAC地址：" Margin="0,0,8,4"/>
                                <TextBlock Grid.Row="2" Grid.Column="1" x:Name="MacAddressTextBlock" Text="获取中..." Margin="0,0,0,4"/>
                                
                                <TextBlock Grid.Row="3" Grid.Column="0" Text="IP地址：" Margin="0,0,8,4"/>
                                <TextBlock Grid.Row="3" Grid.Column="1" x:Name="IpAddressTextBlock" Text="获取中..." Margin="0,0,0,4"/>
                                
                                <TextBlock Grid.Row="4" Grid.Column="0" Text="连接状态：" Margin="0,0,8,4"/>
                                <TextBlock Grid.Row="4" Grid.Column="1" x:Name="ConnectionStatusTextBlock" Text="获取中..." Margin="0,0,0,4"/>
                            </Grid>
                        </StackPanel>
                        
                        <!-- 右侧信息 -->
                        <StackPanel Grid.Column="1">
                            <TextBlock Text="实时网络状态"
                                      FontSize="16"
                                      FontWeight="SemiBold"
                                      Margin="0,0,0,12"/>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                
                                <TextBlock Grid.Row="0" Grid.Column="0" Text="网络使用率：" Margin="0,0,8,4"/>
                                <TextBlock Grid.Row="0" Grid.Column="1" x:Name="NetworkUsageTextBlock" Text="0%" Margin="0,0,0,4"/>
                                
                                <TextBlock Grid.Row="1" Grid.Column="0" Text="下载速度：" Margin="0,0,8,4"/>
                                <TextBlock Grid.Row="1" Grid.Column="1" x:Name="DownloadSpeedTextBlock" Text="0 MB/s" Margin="0,0,0,4"/>
                                
                                <TextBlock Grid.Row="2" Grid.Column="0" Text="上传速度：" Margin="0,0,8,4"/>
                                <TextBlock Grid.Row="2" Grid.Column="1" x:Name="UploadSpeedTextBlock" Text="0 MB/s" Margin="0,0,0,4"/>
                                
                                <TextBlock Grid.Row="3" Grid.Column="0" Text="总下载量：" Margin="0,0,8,4"/>
                                <TextBlock Grid.Row="3" Grid.Column="1" x:Name="TotalDownloadTextBlock" Text="0 GB" Margin="0,0,0,4"/>
                                
                                <TextBlock Grid.Row="4" Grid.Column="0" Text="总上传量：" Margin="0,0,8,4"/>
                                <TextBlock Grid.Row="4" Grid.Column="1" x:Name="TotalUploadTextBlock" Text="0 GB" Margin="0,0,0,4"/>
                            </Grid>
                        </StackPanel>
                    </Grid>
                </Border>
                
                <!-- 网络速度历史图表 -->
                <Border Grid.Row="1" 
                       Background="{DynamicResource SystemControlBackgroundAltHighBrush}"
                       BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
                       BorderThickness="1"
                       CornerRadius="8"
                       Margin="0,0,0,16"
                       Padding="16">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Grid.Row="0"
                                  Text="网络速度历史"
                                  FontSize="16"
                                  FontWeight="SemiBold"
                                  Margin="0,0,0,12"/>
                        
                        <oxy:PlotView Grid.Row="1" 
                                     x:Name="NetworkSpeedChart"
                                     Background="Transparent"
                                     MinHeight="200"/>
                    </Grid>
                </Border>
                
                <!-- 网络使用率历史图表 -->
                <Border Grid.Row="2" 
                       Background="{DynamicResource SystemControlBackgroundAltHighBrush}"
                       BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
                       BorderThickness="1"
                       CornerRadius="8"
                       Margin="0,0,0,16"
                       Padding="16">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Grid.Row="0"
                                  Text="网络使用率历史"
                                  FontSize="16"
                                  FontWeight="SemiBold"
                                  Margin="0,0,0,12"/>
                        
                        <oxy:PlotView Grid.Row="1" 
                                     x:Name="NetworkUsageChart"
                                     Background="Transparent"
                                     MinHeight="200"/>
                    </Grid>
                </Border>
                
                <!-- 实时网络使用率显示 -->
                <Border Grid.Row="3" 
                       Background="{DynamicResource SystemControlBackgroundAltHighBrush}"
                       BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
                       BorderThickness="1"
                       CornerRadius="8"
                       Margin="0,0,0,16"
                       Padding="16">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Grid.Row="0"
                                  Text="实时网络使用率"
                                  FontSize="16"
                                  FontWeight="SemiBold"
                                  Margin="0,0,0,12"/>
                        
                        <!-- 下载速度进度条 -->
                        <Grid Grid.Row="1" Margin="0,0,0,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock Grid.Column="0"
                                      Text="下载："
                                      FontSize="12"
                                      VerticalAlignment="Center"
                                      Margin="0,0,8,0"/>
                            
                            <ProgressBar Grid.Column="1"
                                        x:Name="DownloadProgressBar"
                                        Height="20"
                                        Minimum="0"
                                        Maximum="100"
                                        Value="0"
                                        Background="{DynamicResource SystemControlForegroundBaseLowBrush}"
                                        Foreground="#FF4CAF50"/>
                            
                            <TextBlock Grid.Column="2"
                                      x:Name="DownloadProgressText"
                                      Text="0 MB/s"
                                      FontSize="12"
                                      VerticalAlignment="Center"
                                      Margin="8,0,0,0"/>
                        </Grid>
                        
                        <!-- 上传速度进度条 -->
                        <Grid Grid.Row="2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock Grid.Column="0"
                                      Text="上传："
                                      FontSize="12"
                                      VerticalAlignment="Center"
                                      Margin="0,0,8,0"/>
                            
                            <ProgressBar Grid.Column="1"
                                        x:Name="UploadProgressBar"
                                        Height="20"
                                        Minimum="0"
                                        Maximum="100"
                                        Value="0"
                                        Background="{DynamicResource SystemControlForegroundBaseLowBrush}"
                                        Foreground="#FF2196F3"/>
                            
                            <TextBlock Grid.Column="2"
                                      x:Name="UploadProgressText"
                                      Text="0 MB/s"
                                      FontSize="12"
                                      VerticalAlignment="Center"
                                      Margin="8,0,0,0"/>
                        </Grid>
                    </Grid>
                </Border>
                
                <!-- 网络适配器列表 -->
                <Border Grid.Row="4" 
                       Background="{DynamicResource SystemControlBackgroundAltHighBrush}"
                       BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
                       BorderThickness="1"
                       CornerRadius="8"
                       Padding="16">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Grid.Row="0"
                                  Text="所有网络适配器"
                                  FontSize="16"
                                  FontWeight="SemiBold"
                                  Margin="0,0,0,12"/>
                        
                        <ItemsControl Grid.Row="1" x:Name="NetworkAdaptersItemsControl">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Background="{DynamicResource SystemControlBackgroundBaseLowBrush}"
                                           BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
                                           BorderThickness="1"
                                           CornerRadius="4"
                                           Margin="0,0,0,8"
                                           Padding="12">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <StackPanel Grid.Column="0">
                                                <TextBlock Text="{Binding Name}" FontWeight="SemiBold" FontSize="14"/>
                                                <TextBlock Text="{Binding NetworkType}" FontSize="12" Opacity="0.7"/>
                                                <TextBlock Text="{Binding IpAddress}" FontSize="12" Opacity="0.7"/>
                                            </StackPanel>
                                            
                                            <StackPanel Grid.Column="1" Margin="16,0">
                                                <TextBlock Text="下载" FontSize="10" HorizontalAlignment="Center"/>
                                                <TextBlock Text="{Binding DownloadSpeed, StringFormat={}{0:F2} MB/s}" FontSize="12" HorizontalAlignment="Center"/>
                                            </StackPanel>
                                            
                                            <StackPanel Grid.Column="2" Margin="16,0">
                                                <TextBlock Text="上传" FontSize="10" HorizontalAlignment="Center"/>
                                                <TextBlock Text="{Binding UploadSpeed, StringFormat={}{0:F2} MB/s}" FontSize="12" HorizontalAlignment="Center"/>
                                            </StackPanel>
                                            
                                            <StackPanel Grid.Column="3" Margin="16,0">
                                                <TextBlock Text="状态" FontSize="10" HorizontalAlignment="Center"/>
                                                <Ellipse Width="12" Height="12" HorizontalAlignment="Center">
                                                    <Ellipse.Style>
                                                        <Style TargetType="Ellipse">
                                                            <Setter Property="Fill" Value="Red"/>
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding IsConnected}" Value="True">
                                                                    <Setter Property="Fill" Value="Green"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </Ellipse.Style>
                                                </Ellipse>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </Grid>
                </Border>
            </Grid>
        </ScrollViewer>
    </Grid>
</Window>